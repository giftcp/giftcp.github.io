[{"body":"","link":"https://giftcp.github.io/","section":"","tags":[],"title":""},{"body":"","link":"https://giftcp.github.io/tags/index/","section":"tags","tags":null,"title":"Index"},{"body":"","link":"https://giftcp.github.io/post/","section":"post","tags":["index"],"title":"Posts"},{"body":"","link":"https://giftcp.github.io/tags/","section":"tags","tags":null,"title":"Tags"},{"body":"","link":"https://giftcp.github.io/categories/arch/","section":"categories","tags":null,"title":"Arch"},{"body":"","link":"https://giftcp.github.io/tags/arch/","section":"tags","tags":null,"title":"Arch"},{"body":"Arch Linux Installation Guide (UEFI, GPT, systemd-boot, LUKS, Btrfs) 1. Initial Setup 1.1 Laptop Model Identify the model for compatibility, especially for Wi-Fi and graphics.\n1.2 ISO Download Download the latest Arch ISO from: https://archlinux.org/download/\n1.3 Set Console Font (Optional) If the console font appears too small, set a larger one:\n1setfont ter-v24b To copy the font for persistence:\n1cp /usr/share/kbd/consolefonts/ter-v24b.psf.gz /mnt/usr/share/kbd/consolefonts Other font options (located in /usr/share/kbd/consolefonts): ter-132n lat9w-16 sun12x22 ter-u28b 1.4 Set Alias for Clear Command 1alias c=clear 1.5 Set Keyboard Layout Default layout is us. To change (e.g. to UK):\n1loadkeys uk 2. Network Configuration 2.1 Connect to Wi-Fi Use iwctl or nmtui to connect to a wireless network.\n2.2 Verify Internet Access 1ping archlinux.org 2.3 Set Root Password 1passwd 2.4 SSH Access (Optional) 1ip a 2ssh root@\u0026lt;ip-address\u0026gt; 3. Time and Locale Configuration 3.1 Check and Set Time 1timedatectl 3.2 Set Timezone 1timedatectl list-timezones 2timedatectl set-timezone Africa/Blantyre 4. UEFI Mode Verification 1cat /sys/firmware/efi/fw_platform_size 5. Partitioning Scheme (GPT) Partition Size Type Mount Point p1 512MB EFI /boot p2 Rest LUKS+Btrfs / (subvolumes) p3 2â€“4GB Linux Swap swap 6. LUKS and Btrfs Setup 6.1 Encrypt Root Partition 1cryptsetup luksFormat /dev/nvme0n1p2 2cryptsetup open /dev/nvme0n1p2 luks_btrfs 6.2 Format Btrfs 1mkfs.btrfs /dev/mapper/luks_btrfs 2mount /dev/mapper/luks_btrfs /mnt 6.3 Create Btrfs Subvolumes 1btrfs subvolume create /mnt/@ 2btrfs subvolume create /mnt/@home 3umount /mnt 6.4 Setup Swap and EFI 1mkswap /dev/nvme0n1p3 2swapon /dev/nvme0n1p3 3mkfs.fat -F32 /dev/nvme0n1p1 6.5 Mount Subvolumes and Boot 1mount -o subvol=@ /dev/mapper/luks_btrfs /mnt 2mkdir -p /mnt/{home,boot} 3mount -o subvol=@home /dev/mapper/luks_btrfs /mnt/home 4mount /dev/nvme0n1p1 /mnt/boot 6.6 Verify Subvolumes 1btrfs subvolume list /mnt 7. Install Arch Linux Base 1pacstrap -K /mnt base base-devel linux linux-firmware git btrfs-progs efibootmgr inotify-tools timeshift neovim networkmanager pipewire pipewire-alsa pipewire-pulse pipewire-jack wireplumber reflector zsh zsh-completions zsh-autosuggestions openssh man sudo iwd hyprland intel-ucode tmux 8. System Configuration (Inside chroot) 8.1 Generate Fstab 1genfstab -U /mnt \u0026gt;\u0026gt; /mnt/etc/fstab 2arch-chroot /mnt 8.2 Timezone \u0026amp; Clock 1ln -sf /usr/share/zoneinfo/Africa/Blantyre /etc/localtime 2hwclock --systohc 8.3 Locale 1nvim /etc/locale.gen 2# Uncomment en_US.UTF-8 3locale-gen 4echo \u0026#34;LANG=en_US.UTF-8\u0026#34; \u0026gt; /etc/locale.conf 9. Hostname and Console Font 1echo \u0026#34;jarvis\u0026#34; \u0026gt; /etc/hostname 2cp /usr/share/kbd/consolefonts/ter-v24b.psf.gz /usr/share/kbd/consolefonts 3echo \u0026#34;FONT=ter-v24b\u0026#34; \u0026gt; /etc/vconsole.conf 10. Initramfs Configuration What is initramfs? initramfs (initial RAM filesystem) is a temporary root filesystem loaded into memory during the boot process. It provides essential drivers and scripts that allow the real root filesystem to be mounted. In encrypted or complex setups, it is crucial for unlocking LUKS containers and mounting Btrfs subvolumes before handing control to the main OS.\n10.1 Configure initramfs Edit /etc/mkinitcpio.conf:\n1HOOKS=(base systemd autodetect microcode modconf keyboard sd-vconsole kms sd-encrypt block btrfs filesystems fsck) 10.2 Rebuild initramfs 1mkinitcpio -P 11. Install Bootloader (systemd-boot) 1mount /dev/nvme0n1p1 /mnt/boot 2arch-chroot /mnt 3bootctl install 4bootctl update Create Boot Entry Create /boot/loader/entries/arch.conf:\n1title Arch Linux 2linux /vmlinuz-linux 3initrd /initramfs-linux.img 4options rd.luks.name=\u0026lt;UUID\u0026gt;=luks_btrfs root=/dev/mapper/luks_btrfs rw Get the UUID:\n1blkid /dev/nvme0n1p2 ","link":"https://giftcp.github.io/post/arch_linux_installation/","section":"post","tags":["arch","linux","mkinitcpio","systemd","btrfs","luks"],"title":"Arch installation on a BTRFS root filesystem with LUKS encryption"},{"body":"","link":"https://giftcp.github.io/series/arch-linux/","section":"series","tags":null,"title":"Arch Linux"},{"body":"","link":"https://giftcp.github.io/tags/btrfs/","section":"tags","tags":null,"title":"Btrfs"},{"body":"","link":"https://giftcp.github.io/categories/","section":"categories","tags":null,"title":"Categories"},{"body":"","link":"https://giftcp.github.io/categories/linux/","section":"categories","tags":null,"title":"Linux"},{"body":"","link":"https://giftcp.github.io/tags/linux/","section":"tags","tags":null,"title":"Linux"},{"body":"","link":"https://giftcp.github.io/tags/luks/","section":"tags","tags":null,"title":"Luks"},{"body":"","link":"https://giftcp.github.io/tags/mkinitcpio/","section":"tags","tags":null,"title":"Mkinitcpio"},{"body":"","link":"https://giftcp.github.io/series/","section":"series","tags":null,"title":"Series"},{"body":"","link":"https://giftcp.github.io/tags/systemd/","section":"tags","tags":null,"title":"Systemd"},{"body":"","link":"https://giftcp.github.io/archives/","section":"","tags":null,"title":""}]